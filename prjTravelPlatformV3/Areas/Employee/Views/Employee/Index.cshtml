@model IEnumerable<prjTravelPlatformV3.Models.TEmployee>
@{
    ViewData["Title"] = "員工管理";
}

@section Styles {
    <link href="~/lib/datatables/css/jquery.datatables.css" rel="stylesheet" />
    <style>
        thead {
            background-color: lightslategrey;
            color: black;
        }
    </style>
}
<h3>員工管理</h3>

@* <button id="t1" type="button" class="btn btn-info" data-bs-toggle="modal" data-bs-target="#hotelPartial" onclick="getEditPartial(0)"><i class="fa-solid fa-circle-plus" style="font-size:0.8rem"></i> 新增</button> *@

<table class="table" id="tbEmployee">
    <thead>
        <tr>
            <th style="display:none">id</th>
            <th>員工名稱</th>
            <th>帳號</th>
            <th>性別</th>
            <th>聯絡號碼</th>
            <th>出生日期</th>
            <th>電子信箱</th>
            <th>住址</th>
            <th>狀態</th>
            <th>職位</th>
            <th style="width:50px">功能</th>
        </tr>
    </thead>
</table>

@section Scripts {
    @* @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    } *@
    <script src="~/lib/datatables/js/jquery.datatables.min.js"></script>
    <script src="//cdn.datatables.net/fixedheader/3.4.0/js/dataTables.fixedHeader.min.js"></script>
    <script>
        const loadEmployeeData = () => {
            $("#tbEmployee").dataTable({
                autoWidth: false,
                ajax: {
                    type: 'GET',
                    url: "/api/Employee/GetAll",
                    dataSrc: function (json) { return json; }
                },
                columns: [
                    { "data": "fEmployeeId", "visible": false },
                    { "data": "fName" },
                    { "data": "fAccountNumber" },
                    { "data": "fGender" },
                    { "data": "fPhone" },
                    { "data": "fBirth" },
                    { "data": "fEmail" },
                    { "data": "fAddress" },
                    { "data": "fStatus" },
                    { "data": "fStaffId" },
                    // {
                    //     data: null,
                    //     title: "功能",
                    //     render: function (data, type, row) {
                    //         return `<button id="t1" type = "button" class="btn btn-primary btn-sm me-1" data-bs-toggle="modal" data-bs-target="#hotelPartial" onclick="getEditPartial(${row.fHotelId})"><i class="fa-solid fa-pen-to-square" style="font-size:0.8rem"></i> 編輯</button> ` +
                    //             '<button type="button" class="btn btn-danger btn-sm"><i class="fa-solid fa-trash" style="font-size:0.8rem"></i> 刪除</button>'
                    //     }
                    // },
                ],
                fixedHeader: { header: true },
                language: {
                    url: 'https://cdn.datatables.net/plug-ins/1.13.7/i18n/zh-HANT.json'
                },


            })
        }
        $(document).ready(() => {
            loadEmployeeData();
        })
    </script>
}
